<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è –≤ –ß–µ—Ö–∏–∏ | √öƒçetnictv√≠ v ƒåR</title>
  <style>
    :root {
      --primary: #2a9d8f;
      --secondary: #264653;
      --light: #e9f5f3;
      --dark: #1d3557;
      --gray: #8d99ae;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: system-ui, sans-serif;
      line-height: 1.6;
      color: #333;
      background: #fafafa;
    }
    header {
      background: var(--secondary);
      color: white;
      padding: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 1rem;
    }
    .logo { font-size: 1.4rem; font-weight: bold; }
    .lang-switch { display: flex; gap: 0.5rem; }
    .lang-btn {
      background: rgba(255,255,255,0.2);
      border: none;
      color: white;
      padding: 0.3rem 0.8rem;
      border-radius: 4px;
      cursor: pointer;
    }
    .lang-btn.active {
      background: white;
      color: var(--secondary);
    }
    .access-info {
      background: rgba(255,255,255,0.15);
      padding: 0.5rem 1rem;
      border-radius: 6px;
      font-size: 0.9rem;
    }
    .container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 0 1.5rem;
    }
    .auth-block, .content {
      background: white;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      margin-bottom: 2rem;
    }
    .form-group { margin: 1rem 0; }
    label { display: block; margin-bottom: 0.5rem; font-weight: 600; }
    input {
      width: 100%;
      padding: 0.75rem;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 1rem;
    }
    button {
      background: var(--primary);
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
    }
    button:hover { opacity: 0.9; }
    .status { margin-top: 0.5rem; font-size: 0.9rem; }
    .status.success { color: var(--primary); }
    .status.error { color: #e76f51; }
    .switch-form { margin-top: 1rem; color: var(--gray); }
    .switch-form a {
      color: var(--primary);
      text-decoration: none;
      cursor: pointer;
    }
    .tabs {
      display: flex;
      border-bottom: 2px solid #eee;
      margin-bottom: 1.5rem;
    }
    .tab-btn {
      padding: 0.8rem 1.5rem;
      background: none;
      border: none;
      font-weight: 600;
      color: var(--gray);
      cursor: pointer;
    }
    .tab-btn.active {
      color: var(--primary);
      border-bottom: 3px solid var(--primary);
    }
    .tab-content { display: none; }
    .tab-content.active { display: block; }

    .video-grid {
      display: grid;
      gap: 1.5rem;
    }
    @media (min-width: 768px) {
      .video-grid { grid-template-columns: repeat(2, 1fr); }
    }
    .card {
      border: 1px solid #eee;
      border-radius: 8px;
      overflow: hidden;
    }
    .video-preview {
      background: #000;
      height: 160px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 0.9rem;
    }
    .card-body { padding: 1.2rem; }
    .card h3 { margin-bottom: 0.5rem; color: var(--dark); }
    .card p { color: #555; margin-bottom: 1rem; font-size: 0.95rem; }
    .qa-section { margin-top: 1.5rem; border-top: 1px dashed #eee; padding-top: 1.5rem; }
    .qa-list { margin-top: 1rem; }
    .qa-item { margin-bottom: 1.2rem; padding-bottom: 1.2rem; border-bottom: 1px solid #f0f0f0; }
    .qa-item:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
    .qa-question { font-weight: 600; color: var(--dark); margin-bottom: 0.4rem; }
    .qa-answer { color: var(--primary); font-style: italic; }

    .task-card { border-left: 4px solid var(--primary); }
    .task-input { width: 100%; margin: 0.75rem 0; padding: 0.6rem; border: 1px solid #ddd; border-radius: 4px; }
    .feedback { margin-top: 0.75rem; padding: 0.75rem; border-radius: 6px; display: none; }
    .feedback.correct { display: block; background: #e6f7ee; color: #1a7f4a; }
    .feedback.incorrect { display: block; background: #fdf2f2; color: #c00; }

    [data-lang="cz"] { display: none; }
    html[cz] [data-lang="ru"] { display: none !important; }
    html[cz] [data-lang="cz"] { display: block !important; }
  </style>
</head>
<body>
  <header>
    <div class="logo" data-lang="ru">–ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è –≤ –ß–µ—Ö–∏–∏</div>
    <div class="logo" data-lang="cz">√öƒçetnictv√≠ v ƒåR</div>
    <div class="lang-switch">
      <button class="lang-btn active" data-set-lang="ru">üá∑üá∫ RU</button>
      <button class="lang-btn" data-set-lang="cz">üá®üáø CZ</button>
    </div>
    <div class="access-info" id="accessStatus">
      <span data-lang="ru">–ù–µ –≤ —Å–∏—Å—Ç–µ–º–µ</span>
      <span data-lang="cz">Nep≈ôihl√°≈°en</span>
    </div>
  </header>

  <div class="container">
    <!-- === –§–û–†–ú–´ –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò === -->
    <div id="authFlow">
      <div id="registerForm" class="auth-block">
        <h2 data-lang="ru">–°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç</h2>
        <h2 data-lang="cz">Vytvo≈ôte √∫ƒçet</h2>
        <div class="form-group">
          <label for="email" data-lang="ru">Email</label>
          <label for="email" data-lang="cz">E-mail</label>
          <input type="email" id="email" required>
        </div>
        <div class="form-group">
          <label for="password" data-lang="ru">–ü–∞—Ä–æ–ª—å (–æ—Ç 6 —Å–∏–º–≤–æ–ª–æ–≤)</label>
          <label for="password" data-lang="cz">Heslo (od 6 znak≈Ø)</label>
          <input type="password" id="password" minlength="6" required>
        </div>
        <button id="registerBtn" data-lang="ru">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
        <button id="registerBtn" data-lang="cz">Registrovat</button>
        <div class="switch-form">
          <a id="showLogin" data-lang="ru">–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? –í–æ–π—Ç–∏</a>
          <a id="showLogin" data-lang="cz">Ji≈æ m√°te √∫ƒçet? P≈ôihl√°sit se</a>
        </div>
        <div id="regStatus" class="status"></div>
      </div>

      <div id="loginForm" class="auth-block" style="display:none;">
        <h2 data-lang="ru">–í—Ö–æ–¥</h2>
        <h2 data-lang="cz">P≈ôihl√°≈°en√≠</h2>
        <div class="form-group">
          <label for="loginEmail" data-lang="ru">Email</label>
          <label for="loginEmail" data-lang="cz">E-mail</label>
          <input type="email" id="loginEmail" required>
        </div>
        <div class="form-group">
          <label for="loginPassword" data-lang="ru">–ü–∞—Ä–æ–ª—å</label>
          <label for="loginPassword" data-lang="cz">Heslo</label>
          <input type="password" id="loginPassword" required>
        </div>
        <button id="loginBtn" data-lang="ru">–í–æ–π—Ç–∏</button>
        <button id="loginBtn" data-lang="cz">P≈ôihl√°sit se</button>
        <div class="switch-form">
          <a id="showRegister" data-lang="ru">–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
          <a id="showRegister" data-lang="cz">Nem√°te √∫ƒçet? Registrovat</a>
        </div>
        <div id="loginStatus" class="status"></div>
      </div>

      <div id="activateForm" class="auth-block" style="display:none;">
        <h2 data-lang="ru">–ê–∫—Ç–∏–≤–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–∞</h2>
        <h2 data-lang="cz">Aktivace p≈ô√≠stupu</h2>
        <div class="form-group">
          <label for="code" data-lang="ru">–ö–æ–¥ –¥–æ—Å—Ç—É–ø–∞</label>
          <label for="code" data-lang="cz">P≈ô√≠stupov√Ω k√≥d</label>
          <input type="text" id="code" required>
        </div>
        <button id="activateBtn" data-lang="ru">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å</button>
        <button id="activateBtn" data-lang="cz">Aktivovat</button>
        <div class="switch-form">
          <a id="backToLoginLink" data-lang="ru">‚Üê –ù–∞–∑–∞–¥</a>
          <a id="backToLoginLink" data-lang="cz">‚Üê Zpƒõt</a>
        </div>
        <div id="activateStatus" class="status"></div>
      </div>
    </div>

    <!-- === –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ (–ø–æ—Å–ª–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏) === -->
    <div id="mainContent" class="content" style="display:none;">
      <div class="tabs">
        <button class="tab-btn active" data-tab="videos" data-lang="ru">–í–∏–¥–µ–æ—É—Ä–æ–∫–∏</button>
        <button class="tab-btn" data-tab="tasks" data-lang="ru">–ó–∞–¥–∞–Ω–∏—è –∏ —Ç–µ—Å—Ç—ã</button>
        
        <button class="tab-btn active" data-tab="videos" data-lang="cz">Video lekce</button>
        <button class="tab-btn" data-tab="tasks" data-lang="cz">√ökoly a testy</button>
      </div>

      <!-- –í–∏–¥–µ–æ—É—Ä–æ–∫–∏ -->
      <div id="videos" class="tab-content active">
        <h2 data-lang="ru">–í–∏–¥–µ–æ—É—Ä–æ–∫–∏</h2>
        <h2 data-lang="cz">Video lekce</h2>
        <div class="video-grid">
          <div class="card">
            <div class="video-preview">‚ñ∂Ô∏è –í–∏–¥–µ–æ: –í–≤–µ–¥–µ–Ω–∏–µ –≤ —á–µ—à—Å–∫—É—é –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—é</div>
            <div class="card-body">
              <h3 data-lang="ru">–£—Ä–æ–∫ 1: –û—Å–Ω–æ–≤—ã —É—á—ë—Ç–∞ –≤ –ß–†</h3>
              <h3 data-lang="cz">Lekce 1: Z√°klady √∫ƒçetnictv√≠ v ƒåR</h3>
              <p data-lang="ru">–ß—Ç–æ —Ç–∞–∫–æ–µ DA, –∫–∞–∫ –≤–µ—Å—Ç–∏ —É—á—ë—Ç –ò–ü, —Å—Ä–æ–∫–∏ —Å–¥–∞—á–∏ –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç–∏.</p>
              <p data-lang="cz">Co je DA, jak v√©st √∫ƒçetnictv√≠ pro OSVƒå, lh≈Øty pro pod√°v√°n√≠ v√Ωkaz≈Ø.</p>
              <button class="ask-btn" data-video="1" data-lang="ru">–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å</button>
              <button class="ask-btn" data-video="1" data-lang="cz">Polo≈æit ot√°zku</button>
              
              <div class="qa-section">
                <h4 data-lang="ru">–í–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã</h4>
                <h4 data-lang="cz">Ot√°zky a odpovƒõdi</h4>
                <div class="qa-list">
                  <div class="qa-item">
                    <div class="qa-question" data-lang="ru">–ú–æ–∂–Ω–æ –ª–∏ –≤–µ—Å—Ç–∏ —É—á—ë—Ç –≤ Excel, –µ—Å–ª–∏ –æ–±–æ—Ä–æ—Ç—ã –Ω–µ–±–æ–ª—å—à–∏–µ?</div>
                    <div class="qa-question" data-lang="cz">Lze v√©st √∫ƒçetnictv√≠ v Excelu p≈ôi mal√©m obratu?</div>
                    <div class="qa-answer" data-lang="ru">‚úÖ –î–∞, –¥–æ 1 500 000 CZK –æ–±–æ—Ä–æ—Ç–∞ –≤ –≥–æ–¥ –º–æ–∂–Ω–æ –≤–µ—Å—Ç–∏ —É–ø—Ä–æ—â—ë–Ω–Ω—ã–π —É—á—ë—Ç (DA) –¥–∞–∂–µ –≤—Ä—É—á–Ω—É—é.</div>
                    <div class="qa-answer" data-lang="cz">‚úÖ Ano, do obratu 1 500 000 CZK za rok lze v√©st zjednodu≈°en√© √∫ƒçetnictv√≠ (DA) i ruƒçnƒõ.</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="video-preview">‚ñ∂Ô∏è –í–∏–¥–µ–æ: –ù–∞–ª–æ–≥ –Ω–∞ –ø—Ä–∏–±—ã–ª—å ‚Äî 2025</div>
            <div class="card-body">
              <h3 data-lang="ru">–£—Ä–æ–∫ 2: –ù–∞–ª–æ–≥ –Ω–∞ –ø—Ä–∏–±—ã–ª—å</h3>
              <h3 data-lang="cz">Lekce 2: Da≈à z p≈ô√≠jmu</h3>
              <p data-lang="ru">–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ 2025 –≥–æ–¥—É, –≤—ã—á–µ—Ç—ã, —Ä–∞—Å—á—ë—Ç –∞–≤–∞–Ω—Å–æ–≤.</p>
              <p data-lang="cz">Zmƒõny v roce 2025, odpoƒçty, v√Ωpoƒçet z√°loh.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- –ó–∞–¥–∞–Ω–∏—è –∏ —Ç–µ—Å—Ç—ã -->
      <div id="tasks" class="tab-content">
        <h2 data-lang="ru">–ó–∞–¥–∞–Ω–∏—è –∏ —Ç–µ—Å—Ç—ã</h2>
        <h2 data-lang="cz">√ökoly a testy</h2>
        <div class="card task-card">
          <div class="card-body">
            <h3 data-lang="ru">–¢–µ—Å—Ç: –í–∏–¥—ã –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç–∏</h3>
            <h3 data-lang="cz">Test: Druhy v√Ωkaz≈Ø</h3>
            <p data-lang="ru">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:</p>
            <p data-lang="cz">Vyberte spr√°vn√© mo≈ænosti:</p>
            <div>
              <label><input type="checkbox" name="test1" value="b"> √öƒçetn√≠ z√°vƒõrka</label><br>
              <label><input type="checkbox" name="test1" value="c"> Da≈àov√© p≈ôizn√°n√≠ k DPH</label><br>
              <label><input type="checkbox" name="test1" value="d"> V√Ωkaz zisku a ztr√°ty</label><br>
            </div>
            <button class="check-btn" data-task="1" data-lang="ru">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
            <button class="check-btn" data-task="1" data-lang="cz">Zkontrolovat</button>
            <div class="feedback" id="feedback1"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // === –õ–û–ö–ê–õ–ò–ó–ê–¶–ò–Ø ===
    document.querySelectorAll('[data-set-lang]').forEach(btn => {
      btn.addEventListener('click', () => {
        const lang = btn.dataset.setLang;
        document.documentElement.setAttribute('lang', lang);
        if (lang === 'cz') document.documentElement.setAttribute('cz', '');
        else document.documentElement.removeAttribute('cz');
        document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
      });
    });

    // === API-–í–´–ó–û–í–´ ===
    async function apiCall(endpoint, data) {
      const res = await fetch(`/api${endpoint}`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });
      return res.json();
    }

    // === –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø ===
    document.getElementById('registerBtn').addEventListener('click', async () => {
      const email = document.getElementById('email').value.trim();
      const password = document.getElementById('password').value;
      const status = document.getElementById('regStatus');
      try {
        const data = await apiCall('/register', { email, password });
        status.className = 'status success';
        status.textContent = '‚úÖ –ê–∫–∫–∞—É–Ω—Ç —Å–æ–∑–¥–∞–Ω! / ‚úÖ √öƒçet vytvo≈ôen!';
        setTimeout(() => {
          document.getElementById('registerForm').style.display = 'none';
          document.getElementById('loginForm').style.display = 'block';
        }, 1000);
      } catch (err) {
        status.className = 'status error';
        status.textContent = `‚ùå ${err.message || '–û—à–∏–±–∫–∞'}`;
      }
    });

    // === –í–•–û–î ===
    let currentUser = null;
    document.getElementById('loginBtn').addEventListener('click', async () => {
      const email = document.getElementById('loginEmail').value.trim();
      const password = document.getElementById('loginPassword').value;
      const status = document.getElementById('loginStatus');
      try {
        const data = await apiCall('/login', { email, password });
        currentUser = email;
        if (data.hasAccess) {
          document.getElementById('authFlow').style.display = 'none';
          document.getElementById('mainContent').style.display = 'block';
        } else {
          document.getElementById('loginForm').style.display = 'none';
          document.getElementById('activateForm').style.display = 'block';
        }
        updateAccessStatus(data.accessUntil);
      } catch (err) {
        status.className = 'status error';
        status.textContent = `‚ùå ${err.message || '–ù–µ–≤–µ—Ä–Ω—ã–π email/–ø–∞—Ä–æ–ª—å'}`;
      }
    });

    // === –ê–ö–¢–ò–í–ê–¶–ò–Ø ===
    document.getElementById('activateBtn').addEventListener('click', async () => {
      const code = document.getElementById('code').value.trim();
      const status = document.getElementById('activateStatus');
      try {
        const data = await apiCall('/activate', { email: currentUser, code });
        document.getElementById('authFlow').style.display = 'none';
        document.getElementById('mainContent').style.display = 'block';
        updateAccessStatus(data.accessUntil);
        status.className = 'status success';
        status.textContent = '‚úÖ –î–æ—Å—Ç—É–ø –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! / ‚úÖ P≈ô√≠stup aktivov√°n!';
      } catch (err) {
        status.className = 'status error';
        status.textContent = `‚ùå ${err.message || '–ö–æ–¥ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω'}`;
      }
    });

    // === –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ===
    function updateAccessStatus(accessUntil) {
      const el = document.getElementById('accessStatus');
      if (!currentUser) {
        el.innerHTML = `<span data-lang="ru">–ù–µ –≤ —Å–∏—Å—Ç–µ–º–µ</span><span data-lang="cz">Nep≈ôihl√°≈°en</span>`;
        return;
      }
      if (accessUntil && Date.now() < accessUntil) {
        const date = new Date(accessUntil).toLocaleDateString();
        el.innerHTML = `<span data-lang="ru">–î–æ—Å—Ç—É–ø –¥–æ: ${date}</span><span data-lang="cz">P≈ô√≠stup do: ${date}</span>`;
      } else {
        el.innerHTML = `<span data-lang="ru">–î–æ—Å—Ç—É–ø –∏—Å—Ç—ë–∫</span><span data-lang="cz">P≈ô√≠stup vypr≈°el</span>`;
      }
    }

    // –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏ —Ñ–æ—Ä–º
    document.getElementById('showLogin').onclick = () => {
      document.getElementById('registerForm').style.display = 'none';
      document.getElementById('loginForm').style.display = 'block';
    };
    document.getElementById('showRegister').onclick = () => {
      document.getElementById('loginForm').style.display = 'none';
      document.getElementById('registerForm').style.display = 'block';
    };
    document.getElementById('backToLoginLink').onclick = () => {
      document.getElementById('activateForm').style.display = 'none';
      document.getElementById('loginForm').style.display = 'block';
    };

    // –í–∫–ª–∞–¥–∫–∏
    document.querySelectorAll('[data-tab]').forEach(btn => {
      btn.addEventListener('click', () => {
        const tabId = btn.dataset.tab;
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById(tabId).classList.add('active');
      });
    });

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ—Å—Ç–∞
    document.querySelector('.check-btn')?.addEventListener('click', () => {
      const checked = document.querySelectorAll('input[name="test1"]:checked');
      const values = Array.from(checked).map(cb => cb.value);
      const correct = ['b', 'c', 'd'];
      const isCorrect = values.length === 3 && values.every(v => correct.includes(v));
      
      const feedback = document.getElementById('feedback1');
      feedback.className = 'feedback ' + (isCorrect ? 'correct' : 'incorrect');
      feedback.innerHTML = isCorrect 
        ? '<span data-lang="ru">‚úÖ –í–µ—Ä–Ω–æ!</span><span data-lang="cz">‚úÖ Spr√°vnƒõ!</span>'
        : '<span data-lang="ru">‚ùå –ù–µ–≤–µ—Ä–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ: b, c, d</span><span data-lang="cz">‚ùå ≈†patnƒõ. Spr√°vn√©: b, c, d</span>';
    });

    // "–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å" ‚Äî –∑–∞–≥–ª—É—à–∫–∞
    document.querySelectorAll('.ask-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        alert('–§–æ—Ä–º–∞ –≤–æ–ø—Ä–æ—Å–∞ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤–ª–∞–¥–µ–ª—å—Ü—É –∫—É—Ä—Å–∞.\n–í –¥–µ–º–æ-–≤–µ—Ä—Å–∏–∏ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ.');
      });
    });
  </script>
</body>
</html>